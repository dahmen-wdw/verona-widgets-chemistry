@let atom = atomView();
@let centerX = atom.position[0];
@let centerY = atom.position[1];
<ng-container xmlns:svg="http://www.w3.org/2000/svg">
  <svg:circle
    class="atom-handle"
    [class.selected]="atom.selected"
    [class.temporary]="atom.temporary"
    [class.targeted]="atom.targeted"
    [attr.cx]="centerX"
    [attr.cy]="centerY"
    [attr.r]="atomHandleRadius"
    (pointermove)="service.handleAtomEvent(atom.itemId, $event)"
    (pointerdown)="service.handleAtomEvent(atom.itemId, $event)"
    (pointerup)="service.handleAtomEvent(atom.itemId, $event)"
    (click)="service.handleAtomEvent(atom.itemId, $event)"
  ></svg:circle>

  <svg:text
    class="atom-symbol"
    [class.selected]="atom.selected"
    [class.temporary]="atom.temporary"
    [class.targeted]="atom.targeted"
    [attr.x]="centerX"
    [attr.y]="centerY"
  >
    {{ atom.element.symbol }}
  </svg:text>

  @for (electron of atom.electrons; track $index) {
    @switch (electron.type) {
      @case (singleElectron) {
        @let coords = singleElectronCoordinates(electron, singleElectronDist);
        <svg:circle
          class="atom-electron"
          [attr.cx]="coords.x"
          [attr.cy]="coords.y"
          [attr.r]="singleElectronRadius"
        ></svg:circle>
      }
      @case (doubleElectron) {
        @let coords = doubleElectronCoordinates(electron, doubleElectronDist, doubleElectronWidth);
        <svg:line
          class="atom-electron"
          [attr.x1]="coords.x1"
          [attr.y1]="coords.y1"
          [attr.x2]="coords.x2"
          [attr.y2]="coords.y2"
          [attr.stroke-width]="doubleElectronRadius"
        ></svg:line>
      }
    }
  }
</ng-container>
